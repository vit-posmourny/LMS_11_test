/* === FIX PRO TOM SELECT V TABLERU === */
/* 1. Odstranění původní Bootstrap šipky */
.ts-wrapper.form-select,
.ts-wrapper.form-select .ts-control {
    background-image: none !important;
    background-repeat: no-repeat !important;
    background-size: 0 0 !important;
}

/* 2. Oprava průhledného pozadí dropdownu */
.ts-dropdown {
    background-color: var(--tblr-bg-surface, #ffffff) !important;
    color: var(--tblr-body-color, #1d273b) !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid var(--tblr-border-color, #e6e7e9);
    z-index: 1050;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
    /* Nové: Zaoblení i pro rozbalovací menu */
    border-radius: 4px;
}

/* 3. Vytvoření nové vlastní šipky a úprava Inputu */
.ts-wrapper.form-select .ts-control {
    padding: 0.5625rem 2rem 0.5625rem 0.75rem !important;
    position: relative;
    /* Nové: Mírné zaoblení inputu */
    border-radius: 4px !important;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

/* Nové: Modrý border a stín při focusu (aktivaci) */
.ts-wrapper.focus .ts-control {
    border-color: #206bc4 !important; /* Tabler modrá */
    box-shadow: 0 0 0 0.25rem rgba(32, 107, 196, 0.25) !important; /* Modrý 'glow' efekt */
}

/* Pseudo-element pro šipku */
.ts-wrapper .ts-control::after {
    content: '';
    display: block;
    width: 0.8rem;
    height: 0.8rem;
    position: absolute;
    top: 50%;
    right: 0.75rem;

    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%239e9e9e' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-size: contain;
    background-position: center;

    transform: translateY(-50%);
    transition: transform 0.2s ease-in-out;
    pointer-events: none;
}

/* Rotace šipky při otevření */
.ts-wrapper.dropdown-active .ts-control::after {
    transform: translateY(-50%) rotate(180deg);
}

/* 4. Zvýraznění OPTGROUP (Kategorie) */
.ts-dropdown .optgroup-header {
    background-color: var(--tblr-bg-surface-secondary, #f8fafc);
    color: var(--tblr-body-color);
    font-family: 'Roboto', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;

    /* Úprava: Capitalize (První Velké Ostatní Malá) */
    text-transform: capitalize;

    letter-spacing: 0.04em;
    padding: 0.5rem 0.75rem;
    border-bottom: 1px solid var(--tblr-border-color-light, #f0f0f0);
}

.ts-dropdown .dropdown-item {
    font-family: 'Roboto', sans-serif;
    font-size: 0.9rem;
    padding-left: 1.5rem;
}

/* Trik: Pokud je vybrána položka (has-items), úplně skryjeme vyhledávací input.
   Tím zmizí blikající kurzor i odskok na nový řádek. */
.ts-wrapper.single.has-items .ts-control input {
    width: 0 !important;
    opacity: 0 !important;
    position: absolute !important; /* Vyhodíme ho z toku dokumentu */
    pointer-events: none;
}

/* Přepisuje horizontální dělicí čáru nad optgroup definovanou v Tom Select Bootstrap 5 CSS */
.ts-dropdown .optgroup:before {
    content: none !important; /* Odstraní obsah pseudo-elementu */
    border-top: none !important; /* Odstraní horní rámeček (vlastní čáru) */
    display: none !important; /* Zajištění, že se element vůbec nezobrazí */
}
